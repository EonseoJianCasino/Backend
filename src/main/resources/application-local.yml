# application-local.yml
spring:
  config:
    activate:
      on-profile: local

  jackson:
    serialization:
      INDENT_OUTPUT: true       # 로컬에서만 예쁘게 출력

  datasource:
    url: jdbc:postgresql://db:5432/webtest   # 도커 compose 네트워크 기준
    username: ${DB_USER:dev}
    password: ${DB_PASSWORD:dev1234}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 2
      connection-timeout: 2000

  jpa:
    hibernate:
      ddl-auto: none            # schema.sql에만 테이블 생성 맡김
    properties:
      hibernate:
        format_sql: true
        jdbc.time_zone: UTC

  sql:
    init:
      mode: always
      schema-locations: classpath:db/schema.sql

  flyway:
    enabled: false

management:
  metrics:
    tags:
      env: local                # 로컬 태그 명시

logging:
  level:
    org.springframework.jdbc.datasource.init: INFO
    org.hibernate.SQL: debug
    org.hibernate.orm.jdbc.bind: trace

web:
  cors:
    allowed-origins:
      - "http://localhost:5173"
    allowed-extension-origins:
      - "chrome-extension://*"